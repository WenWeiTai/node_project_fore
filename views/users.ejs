<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/css/reset.css" />
    <link rel="stylesheet" href="/css/common.css" />
    <link rel="stylesheet" href="/css/iconfont.css" />

    <title>WWT后台管理系统</title>
  </head>
  <body>
    <div class="container rmPaddin">
      <!-- 头部 -->
      <%- include('./common/head.ejs') %>
      <!-- 内容 -->
      <div class="main">
        <div class="m-left"><%- include('./common/menu.ejs') %></div>
        <div class="m-right">
          <div class="mainR_box">
            <!-- 搜索 -->
            <form class="form-inline">
              <input
                type="text"
                class="form-control"
                placeholder="请输入搜索内容"
              />
              <button type="submit" class="btn btn-default">搜索</button>
            </form>
            <!-- 表单 -->
            <div class="bs-example">
              <table class="table table-bordered table-hover">
                <thead>
                  <tr>
                    <th>序号</th>
                    <th>用户名</th>
                    <th>用户昵称</th>
                    <th>手机号码</th>
                    <th>性别</th>
                    <th>年龄</th>
                    <th>是否管理员</th>
                    <th>操作</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- <tr>
                    <th scope="row">1</th>
                    <td>wenweitai</td>
                    <td>温维太</td>
                    <td>15899850664</td>
                    <td>男</td>
                    <td>28</td>
                    <td>是</td>
                    <td>
                      <a class="td-update" href="##">修改</a>&ensp;&ensp;<a
                        class="td-del"
                        href="##"
                        >删除</a
                      >
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">1</th>
                    <td>wenweitai</td>
                    <td>温维太</td>
                    <td>15899850664</td>
                    <td>男</td>
                    <td>28</td>
                    <td>是</td>
                    <td>
                      <a class="td-update" href="##">修改</a>&ensp;&ensp;<a
                        class="td-del"
                        href="##"
                        >删除</a
                      >
                    </td>
                  </tr> -->
                  <% for(var i = 0; i < userDb.length; i++) { %>
                    <tr>
                      <th scope="row"><%= i+1 %></th>
                      <td><%= userDb[i].username %></td>
                      <td><%= userDb[i].nickname %></td>
                      <td><%= userDb[i].phone %></td>
                      <td><%= userDb[i].sex %></td>
                      <td><%= userDb[i].age %></td>
                      <td><%= userDb[i].isAdmin === true ? '是' : '否' %></td>
                      <td>
                        <a class="td-update" href="##">修改</a>&ensp;&ensp;
                        <% if(userDb[i].isAdmin == false){ %>
                          
                          <a class="td-del" href="/users/delete?id=<%= userDb[i]._id %>">删除</a>

                        <% }else{ %>
                          <a class="td-del">&ensp;&ensp;&ensp;&ensp;</a>
                        <% } %>
                      </td>
                    </tr>
                  <% } %>
                </tbody>
              </table>
            </div>
            <!-- 分页 -->
            <nav aria-label="Page navigation">
              <ul class="pagination">
                <li>
                  <a href="/users/?page=<%= page - 1 < 1 ? 1 : page - 1 %>&pageSize=<%= pageSize %>" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                  </a>
                </li>
                <!-- 
                  后台传递总页数、第几页、页条数
                  totalPage 总页数：显示几页
                  page 第几页：高亮 第几页
                  pageSize 页条数：一页渲染几条数据
                  
                -->
                <% for(var i = 0; i < totalPage; i++){ %>
                  <li class="<%= page == (i + 1) ? 'active' : '' %>"><a href="/users/?page=<%= i + 1 %>&pageSize=<%= pageSize %>"><%= i + 1 %></a></li>
                <% } %>
                <li>
                  <a href="/users/?page=<%= page + 1 > totalPage ? totalPage : page + 1%>&pageSize=<%= pageSize %>" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </div>
      <!-- 尾部 -->
      <%- include('./common/foot.ejs') %>
    </div>
    
  </body>
</html>
